

## 1 Введение
 
### 1 Назначение
    
Данная спецификация описывает функциональные и нефункциональные требования
к программному продукту "Оракул" (Oracle). Этот документ предназначен для 
разработчика, который будет реализовывать и проверять корректность работы
программы. 

### 2 Границы проекта 
        
Проект предполагает создание фронтенда и бэкенда веб-приложения, оставляя за 
рамками иную деятельность.


```regexp
Что представляет собой 'иная деятельность'? 
```

### 3 Ссылки
        
Информация к размышлению: https://okev.org/znachenie-citat-o-samorazvitii.html

```regexp
Зачем здесь эта информация?
```

## 2 Общее описание
 
### 1.Общий взгляд на продукт

Программный продукт представляет собой веб-приложение, 
в котором по нажатию на соответствующий элемент интерфейса пользователь 
получает случайный результат предсказания в виде цитаты из текста. Цель - дать указание для  
правильного состояния, которое нужно пользователю в момент, когда он запрашивает цитату.

```regexp
текст должен быть определенной тематики или подойдет любой? 
```

### 2 Классы и характеристики пользователей
        
| Класс пользователей | Описание                                                                |
|---------------------|-------------------------------------------------------------------------|
| Работодатель        | Все, для кого нужна демонстрация тестирования продукта                  |
| Клиент              | Любой человек, обращающий внимание на 'знаки' в себе и окружающем мире  |
| Все остальные       | Случайные интернет-пользователи                                         |
     
### 3 Операционная среда

Приложение предназначено для использования в браузере.

```regexp
Есть ли ограничения по модели и версии браузеров? 
```
### 4 Пользовательские требования 

#### 4.1 User story
Как работодатель, я хочу видеть образец тестирования приложения

*Критерий приёмки* 
Приложение протестировано и тесты оформлены

*Заметки* 
Тестовая документация должна лежать в корневой папке проекта

#### 4.2 User story
Как клиент, я хочу иметь возможность по запросу получать цитаты из текстов по саморазвитию

*Критерий приёмки* 
Приложение по нажатию на кнопку отображает случайные цитаты и заносит их в карточки

```regexp
Приложение по нажатию делает два действия одновременно? Или это разнесенные по
времени события?
```
*Заметки* 
Отображение цитат в виде всплывающего окна

#### 4.3 User story 
Как клиент, я хочу иметь возможность узнать про создателей приложения

*Критерии приёмки*
Приложение отображает информацию о разработчике

```regexp
В каком виде информация?
```
*Заметки*
Отображение информации о разработчиках

#### 4.4 User story
Как клиент, я хочу иметь возможность заносить в текстовое поле свои цитаты и 
сохранять

*Критерии приёмки* 
В приложении есть текстовое поле для введения своего текста

*Заметки*
Поле ввода с кнопкой подтверждения занимает левую половину экрана

#### 4.5 User story 
Как клиент, я хочу иметь возможность получить ранее внесённую в текстовое поле свою цитату

*Критерии приёмки* 
Ранее внесенную цитату можно получить 

*Заметки*
Должен отображаться индикатор, показывающий, что идет процесс сохранения

#### 4.6 User story
Как клиент, я хочу иметь возможность видеть уже полученные цитаты   

*Критерии приёмки* 
В приложении отображаются карточки с полученными цитатами. 

*Заметки*: 
Область с карточками в виде списка расположено в правой половине экрана

#### 4.7 User story
Как клиент, я хочу иметь возможность прочитать уже полученную цитату полностью     

*Критерии приёмки* 
В приложении отображается всплывающее окошко с полной цитатой. 

*Заметки* 
Окошко всплывает при одинарном клике на карточку.

#### 4.8 User story
Как клиент, я хочу иметь возможность редактировать карточку с цитатой, чтобы потом получить изменённую версию     

*Критерии приёмки* 
В приложении есть возможность редактировать карточку с цитатой, а в последующем получить изменённую версию

*Заметки* 
Редактирование происходит путём двойного клика на карточку

#### 4.9 User story 
Как клиент, я хочу иметь возможность узнать, сколько цитат я запросил

*Критерии приёмки*
В приложении отображается количество запрошенных цитат

*Заметки* 
Количество цитат отображается непосредственно над списком с карточками 

#### 4.10 User story
Как клиент, я хочу иметь возможность удалять карточки с цитатами     

*Критерии приёмки* 
В приложении есть возможность удалить карточку с цитатой локально, а также отдельно локально и из базы данных

*Заметки* 
Удаление карточек происходит путём нажатия крестика в правом углу карточки

```regexp
Непонятно, как именно должно быть реализовано удаление одним крестиком локально и отдельно из базы данных
```

### 5 Атрибуты качества

#### 5.1 Требования по удобству использования
| № | Требование                    | 	Описание                                                                                                                                                                                                                           |
|---|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | Всё в один клик               | Пользователь должен иметь возможность сделать любое из возможных действий в один клик: запросить цитату, внести свою цитату, рассмотреть уже полученные цитаты, перейти к местонахождению разработчика, перейти на главную страницу |                            |
| 2 | Время отклика                 | Время отклика системы на любые действия пользователя должно быть не больше 1 секунды, кроме первоначального запуска.                                                                                                                |
| 3 | Простота навигации            | Навигация должна содержать не более 2 кнопок                                                                                                                                                                                        |
| 4 | Сообщения об ошибках          | Все сообщения об ошибках должны быть понятны и указывать на конкретные действия по исправлению, см. п. Ошибки и исключения                                                                                                          |
| 5 | Доступность для читалок       | Все кнопки и текстовые элементы должны быть совместимы с программами экранного чтения.                                                                                                                                              |

```regexp
1 Невыполнимое требование, поскольку редактирование уже требует двойного клика
2 Каким именно "небольшим" должно быть время запуска? Каким должно быть время "первоначального запуска"? В какой момент приложение считается запущенным? Кроме того задержки, связанные с запросами по сети, неизбежны
3 Значит ли выражение "не более 2 кнопок", что кнопка может быть одна или не быть вообще?.
4 Здесь указан пункт об ошибках, но такого раздела с подробностями в спецификации нет
5 Раздела о доступности приложения нет в требованиях 
```
#### 5.2 Требования к производительности

Приложение должно быть достаточно производительным

```regexp
Что значит "достаточно"? Необходимы конкретные цифры и критерии. 
```

#### 5.3 Требования к безопасности

Система авторизации и аутентификации пользователей в приложении не предполагаются

#### 5.4 Требования к доступности

Не имеются

#### 5.5 Требования к переносимости

Поскольку в качестве клиентской части используется кросс-платформенный фреймворк, специальная реализация переносимости не требуется 

### 6 Требования к локализации

Приложение должно отображать тексты на русском языке

### 7 Общая схема приложения
    
![диаграмма](../doc-data/gen_view.png)

### 8 Требования к фронтэнду

#### 8.1 Бизнес-правила

| Идентификатор | Название                   | Описание                                                                              |
|---------------|----------------------------|---------------------------------------------------------------------------------------|
| 1             | Попап                      | Размер всплывающего окна адаптируется к размеру цитаты                                |
| 2             | Количество карточек        | Количество карточек зависит от того, сколько их запросит пользователь                 |
| 3             | Повторение цитаты          | Цитаты не должны повторяться.                                                         |
| 6             | Обновление списка карточек | Обновление списка происходит автоматически после закрытия окошка с полученной цитатой |
```regexp
2 Непонятен посыл. И так понятно, что кол-во запрошенных цитат соответствует итоговому количеству цитат
3 Что значит "повторение цитаты"? Имеется в виду смысл цитаты или дословное совпадение? И как это реализуется?

```
#### 8.2 Технологический стек

В качестве фреймворка для фронтенда используется Flutter

#### 8.3 Дизайн

| № | Описание                                                                          |
|---|-----------------------------------------------------------------------------------|
| 1 | На странице "Домой" должны быть поле ввода, кнопка запроса, кнопка подтверждения. |
| 2 | На странице "О нас" должна быть карта с местонахождением разработчика.            | 
| 3 | Всплывающее окно всегда появляется по центру экрана                               |
| 4 | Всплывающее окно закрывается кликом на кнопку снизу по центру                     |
| 5 | Карточки реализованы в виде списка                                                |
| 6 | Обновление списка происходит автоматически                                        |
| 7 | Счетчик цитат находится над карточками                                            |
| 8 | При двойном клике на карточку всплывает окошко, где можно редактировать цитату    |
| 9 | При одинарном клике на карточку всплывает окошко, где можно прочитать всю цитату  |

#### 8.4 UI и UX


| №  | Описание элементов приложения                                                            |
|----|------------------------------------------------------------------------------------------|
| 1  | Размеры элементов адаптивные, поэтому не pixel perfect                                   |
| 2  | Цвет фона страницы #E0E0E0                                                               |
| 3  | У всех элементов, кроме карты, имеется фоновая тень                                      |                                                                                |
| 4  | Радиус углов у всех элементов, кроме карты, 3                                            |
| 5  | Окантовки у элементов отсутствуют                                                        |
| 6  | Цвет фона кнопок навигации #FEF67F                                                       |
| 7  | Шрифт на кнопках навигации Roboto                                                        |
| 8  | Состояние кнопок активное                                                                |
| 9  | Шрифт в текстовом поле Roboto                                                            |
| 10 | Цвет кнопки получения #72BB53                                                            |
| 11 | Цвет кнопки подтверждения #F06E9C                                                        |
| 12 | Шрифт на кнопке подтверждения Roboto                                                     |
| 13 | Фон карточек справа от текстового поля, в которых сохраняются полученные цитаты, #FFFFFF |
| 14 | Шрифт в карточках Roboto                                                                 |
| 15 | Цвет фона всплывающего окна #FFFFFF                                                      |
| 16 | Тень от всплывающего окна                                                                |
| 17 | Шрифт текста во всплывающем окне Roboto                                                  |

```regexp
8 Не указано, что кнопка, ассоциированная с соответствующей страничкой, при нахождении на ней неактивна
16 Тень в этом случае бессмысленна и не видна, поскольку задний фон окна затемняется

Не указан цвет кнопки обновления карточек
```
#### 8.5 Работа с данными

Заключается в извлечении, сохранении и изменении цитат в базе данных

```regexp
Какие данные допустимы для ввода?
```
#### 8.6 Сообщения и уведомления

После нажатия на кнопку должно появляться сообщение с цитатой в виде всплывающего окна

#### 8.7 Работа в оффлайн-режиме

Если пропал доступ к интернету, то при нажатии кнопок снизу экрана показывается плашка с предупреждением, что доступа к серверу нет

#### 8.8 Макет
[чек-лист](check-list-requirements.md#проверка-дизайна)

![Макет](../doc-data/layout.png)

#### 8.9 Обработка ошибок

Сообщения об ошибках в виде всплывающих окон

```regexp
Отсутствует раздел об ошибках и исключениях
```
```regexp
Нет раздела про хостинг фронтенд части приложения
```

### 9 Требования к бэкэнду

#### 9.1 Бизнес-правила

| Идентификатор | Название                             | Описание                                                                                  |
|---------------|--------------------------------------|-------------------------------------------------------------------------------------------|
| 1             | Повтор цитат                         | Цитаты не должны повторятся                                                               |
| 2             | Удаление записей                     | При удалении карточки с цитатой она удаляется либо локально либо локально и в базе данных |
| 3             | Начальное состояние                  | Изначально в базе данных уже должно быть не менее 40 цитат                                |
| 4             | Недоступность                        | При недоступности бэкенда показывается соответствующее сообщение                          |
| 5             | Количество символов в тесктовом поле | Не должно быть меньше 15 и больше 1500                                                    |
```regexp
Каким образом это контролируется? Оправданно ли это с позиций производительности?
```
#### 9.2 Технологический стек

В качестве фреймворка для бэкенда используется FastApi

#### 9.3 Архитектура

При создании приложения применяется монолитная архитектура

#### 9.4 API и эндпоинты

[API](../doc-data/api.yaml) - схема апи 

```regexp
У эндпоинта в схеме openapi отсутствуют responses с ошибками
В схеме API отсутствуют описания для эндпоинтов delete и patch
Отсутствует максимальное и минимальное количество допустимых символов в поле content
В схеме отсутствуют эндпоинты patch /api/prophecy, patch /api/prophecy/[id] и delete /api/prophecy/[id] 
Отсутствует указание на необходимость авторизации Basic при обращении к эндпоинтам 
```
#### 9.5 Модель данных

Данные пересылаются по сети в формате JSON

#### 9.6 База данных

Используется база данных

```regexp
Какая именно база данных или любая?
Стоит указать сколько записей допустимо хранит в базе данных и сколько занесено по умолчанию 
```

При остановке и недоступности сервера indexed db в браузере очищается

#### 9.7 Логическая модель базы данных

[чек-лист](check-list-requirements.md#данные)

![Схема](../doc-data/model.png)

#### 9.8 Аутентификация и авторизация 

Не требуется


```regexp
Отсутствует раздел об ошибках и исключениях 
```
```regexp
Нет раздела про хостинг бекенд части приложения
```
